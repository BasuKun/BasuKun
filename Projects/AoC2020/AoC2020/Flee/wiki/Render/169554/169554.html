<div class="wikidoc"><b>Language Reference</b><br /><br />The expression language that Flee uses is a mix of elements of C# and VB.Net. Since the aim of this library is speed, the language is strongly typed (same rules as C#) and there is no late binding. Unlike C#, the language is <b>not</b> case-sensitive.<br /><br /><b>Contents</b>
<ul><li><a href="#ArithmeticOperators">ArithmeticOperators</a></li>
<li><a href="#ComparisonOperators">ComparisonOperators</a></li>
<li><a href="#AndOrXorNotOperators">AndOrXorNotOperators</a></li>
<li><a href="#ShiftOperators">ShiftOperators</a></li>
<li><a href="#Concatenation">Concatenation</a></li>
<li><a href="#Indexing">Indexing</a></li>
<li><a href="#Literals">Literals</a></li>
<li><a href="#Casting">Casting</a></li>
<li><a href="#ConditionalOperator">ConditionalOperator</a></li>
<li><a href="#InOperator">InOperator</a></li>
<li><a href="#OverloadedOperatorsOnTypes">Overloaded Operators On Types</a></li></ul>
<br /><b>Arithmetic Operators</b><a name="ArithmeticOperators"></a><br />Flee supports all the standard arithmetic operators as well as the modulo (%) and power (^) operators.<br />Example: <span class="codeInline">a*2 + b ^ 2 - 100 % 5</span><br /><br /><b>ComparisonOperators</b><a name="ComparisonOperators"></a><br />All the comparison operators are supported as well.  The not equal operator is <span class="codeInline">&lt;&gt;</span> and the equal operator is <span class="codeInline">=</span><br />Example: <span class="codeInline">a &lt;&gt; 100</span><br /><br /><b>And/Or/Xor/Not Operators</b><a name="AndOrXorNotOperators"></a><br />Flee uses these operators for both logical and bitwise operations.  Since the expression language is strongly-typed, Flee can determine the types of the operands to these operators.  If both operands are booleans, then the operation is logical.  If both are integral, the operation is bitwise.  Any other combination results in a compile error.<br />Example (logical): <span class="codeInline">a &gt; 100 And Not b = 100</span><br />Example (bitwise): <span class="codeInline">(100 or 2) and 1</span><br /><br /><b>Shift Operators</b><a name="ShiftOperators"></a><br />The left (&lt;&lt;) and right (&gt;&gt;) shift operators do a bitwise shift and are only valid on integral types.<br />Example: <span class="codeInline">100 &gt;&gt; 2</span><br /><br /><b>Concatenation</b><a name="Concatenation"></a><br />The + operator also serves as the string concatenation operator.  If either of its operands is a string, it will perform a concatenate instead of an addition.  It is valid for only one operand to be a string in which case, both operands are converted to Object and formatted accordingly.<br />Example: <span class="codeInline">&quot;abc&quot; + &quot;def&quot;</span><br />Example: <span class="codeInline">&quot;the number is: &quot; + 100</span><br /><br /><b>Indexing</b><a name="Indexing"></a><br />The indexing operator takes the form: <span class="codeInline">member[indexExpression]</span>.  Any expression can appear inside the brackets.  If the member being indexed is an array, Flee will emit optimized array element loading instructions.  If the indexed member has a default indexer property, flee will call the property with the evaluated index.  Indexing a type which is not an array and does not have a default indexer generates a compile exception.<br />Example: <span class="codeInline">arr[i + 1] + 100</span><br /><br /><b>Literals</b><a name="Literals"></a><br />Flee supports the following literals in expressions:
<ul><li><b>Char</b> - A character in single quotes: <span class="codeInline">&#39;a&#39;</span></li>
<li><b>Boolean</b> - Either <span class="codeInline">true</span> or <span class="codeInline">false</span></li>
<li><b>Real</b> - Any number with a decimal point.  You can use the &#39;d&#39;, &#39;f&#39;, or &#39;m&#39; suffixes to specify whether the number should be stored in a double, single, or decimal respectively.  Use the ExpressionOptions.RealLiteralDataType option to specify the data type used to store the number when no suffix is specified.  The default is double.</li>
<li><b>Integral</b> - Any number without a decimal point.  Append &quot;L&quot; to force the number to a 64-bit integer and/or a &quot;U&quot; to force it to unsigned.  Flee will try to assign an integer literal to the first integral type that can contain the value.</li>
<li><b>Hex</b> - Integral constants can also be specified in hex notation: <span class="codeInline">0xFF12</span></li>
<li><b>String</b> - String literals are enclosed in double quotes and escaping characters follows the same rules as C#: <span class="codeInline">&quot;string\u0021\r\n a \&quot;new\&quot; line&quot;</span></li>
<li><b>Null</b> - Using the keyword <span class="codeInline">null</span> will load the null reference into an expression.</li>
<li><b>DateTime</b> - A valid .NET DateTime pattern surrounded by #&#39;s.  Use the <span class="codeInline">ExpressionOptions.DateTimeFormat</span> property to control the format.  Example:  <span class="codeInline">#08/06/2008#.ToLongDateString()</span></li>
<li><b>TimeSpan</b> - A string in the format <span class="codeInline">##[d.]hh:mm[:ss[.ff]]#</span>.  Example: <span class="codeInline">#08/06/2008# + ##1.23:45#</span></li></ul>
<br /><b>Casting</b><a name="Casting"></a><br />Casting is performed using the special cast function which takes the form <span class="codeInline">cast(value, type)</span>.<br />Example: <span class="codeInline">100 + cast(obj, int)</span><br /><br /><b>Conditional Operator</b><a name="ConditionalOperator"></a><br />Flee supports a conditional operator that allows you to pick a result based on a boolean condition.  It is implemented as a special function of the form <span class="codeInline">if(condition, whenTrue, whenFalse)</span>.  The operator is a &quot;true&quot; conditional operator: only the expression that matches the condition is evaluated.<br />Example: <span class="codeInline">If(a &gt; 100 and b &gt; 10, &quot;both greater&quot;, &quot;less&quot;)</span><br /><br /><b>In Operator</b><a name="InOperator"></a><br />The In operator is a boolean binary operator that returns true if its first operand is contained in its second operand.  It has two forms
<ul><li><b>List</b>: Searches a list of values for a given value: <span class="codeInline">value IN (value1, value2, value3,...)</span>.  The value is compared against each value in the list and <span class="codeInline">true</span> is returned if the value is found, <span class="codeInline">false</span> if no match is found.</li>
<li><b>Collection</b>: Searches a single collection for a given value: <span class="codeInline">value IN collection</span>.  The collection variable must implement <span class="codeInline">ICollection&lt;T&gt;</span>, <span class="codeInline">IDictionary&lt;K,V&gt;</span>, <span class="codeInline">IList</span>, or <span class="codeInline">IDictionary</span> for the expression to compile.  Arrays can be searched with this operator as they implement the first interface.</li></ul>
<br />Example (List): <span class="codeInline">If(100 in (100, 200, 300, -1), &quot;in&quot;, &quot;not in&quot;)</span><br />Example (Collection): <span class="codeInline">if(100 in collection, &quot;in&quot;, &quot;not in&quot;)</span><br /><br /><b>Overloaded Operators On Types</b><a name="OverloadedOperatorsOnTypes"></a><br />When evaluating an arithmetic, comparison, or conversion operation where the operands are not primitives, Flee will look for and use any overloaded operators defined on the operands.  This means that you can create expressions such as <span class="codeInline">a + b</span> (where a and b are custom types), as long as there is an addition operator defined on either operand.</div><div class="ClearBoth"></div>